{% extends "base.html" %}
{% block title %}Templates · Label Generator{% endblock %}
{% block content %}
<section class="panel">
  <h2>Create a template</h2>
  <p class="panel-intro">Control how a label looks – the picture placement, accent color, and text alignment.</p>
  <form method="post" class="grid-form">
    <input type="hidden" name="action" value="create">
    <label>
      Name
      <input type="text" name="name" required>
    </label>
    <label>
      Description (optional)
      <input type="text" name="description" placeholder="Where the template is used">
    </label>
    <label>
      Image position
      <select name="image_position">
        <option value="left">Left of text</option>
        <option value="top">Above text</option>
      </select>
    </label>
    <label>
      Accent color
      <input type="color" name="accent_color" value="#0a3d62">
    </label>
    <label>
      Text alignment
      <select name="text_align">
        <option value="left">Left align</option>
        <option value="center">Center align</option>
      </select>
    </label>
    <label class="checkbox">
      <input type="checkbox" name="include_description" checked>
      Include description area
    </label>
    <button type="submit" class="primary">Create template</button>
  </form>
</section>

<section class="panel">
  <h2>Existing templates</h2>
  {% if templates %}
    <div class="template-grid">
      {% for template in templates %}
        <article class="template-card">
          <form method="post">
            <input type="hidden" name="action" value="update">
            <input type="hidden" name="template_id" value="{{ template.id }}">
            <header>
              <h3>{{ template.name }}</h3>
              <p>{{ template.description or 'Add a short description to help the team pick the right style.' }}</p>
            </header>
            <div class="template-preview" style="--accent: {{ template.accent_color }}">
              <span class="badge">{{ template.image_position|capitalize }} image</span>
              <span class="badge">{{ template.text_align|capitalize }} text</span>
              {% if not template.include_description %}<span class="badge muted">No description</span>{% endif %}
            </div>
            <label>
              Name
              <input type="text" name="name" value="{{ template.name }}" required>
            </label>
            <label>
              Description
              <input type="text" name="description" value="{{ template.description or '' }}">
            </label>
            <label>
              Image position
              <select name="image_position">
                <option value="left" {% if template.image_position == 'left' %}selected{% endif %}>Left</option>
                <option value="top" {% if template.image_position == 'top' %}selected{% endif %}>Top</option>
              </select>
            </label>
            <label>
              Accent color
              <input type="color" name="accent_color" value="{{ template.accent_color }}">
            </label>
            <label>
              Text alignment
              <select name="text_align">
                <option value="left" {% if template.text_align == 'left' %}selected{% endif %}>Left</option>
                <option value="center" {% if template.text_align == 'center' %}selected{% endif %}>Center</option>
              </select>
            </label>
            <label class="checkbox">
              <input type="checkbox" name="include_description" {% if template.include_description %}checked{% endif %}>
              Include description area
            </label>
            <footer>
              <button type="submit">Save</button>
            </footer>
          </form>
          <form method="post" action="{{ url_for('delete_template', template_id=template.id) }}" class="inline-form" onsubmit="return confirm('Delete template? Labels using it will need a new layout.');">
            <button type="submit" class="danger">Delete</button>
          </form>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p>No templates yet. Create one to get started.</p>
  {% endif %}
</section>
{% endblock %}
